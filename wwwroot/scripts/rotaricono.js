var EventosDisplay =
[
    { "statusid": "0", "name": "[Todos]", "icons": "null" },
    { "statusid": "1", "name": "Position", "icons": "null" },
    { "statusid": "2", "name": "Ignition On", "icons": "ignitionon.gif" },
    { "statusid": "3", "name": "Ignition Off", "icons": "ignitionoff.gif" },
    { "statusid": "4", "name": "Detenido ON", "icons": "other.gif" },
    { "statusid": "5", "name": "Device Reset", "icons": "reset.gif" },
    { "statusid": "6", "name": "Power Up", "icons": "null" },
    { "statusid": "7", "name": "Temperatura", "icons": "null" },
    { "statusid": "8", "name": "Sale de referencia 4", "icons": "null" },
    { "statusid": "9", "name": "GPS Lost", "icons": "gpslost.gif" },
    { "statusid": "10", "name": "Stop", "icons": "stop_black.png" },
    { "statusid": "11", "name": "Desplazamiento", "icons": "lowspeed.gif" },
    { "statusid": "12", "name": "Exceso de velocidad", "icons": "maxspeed1.gif" },
    { "statusid": "13", "name": "Apertura Puerta", "icons": "maxspeed2.gif" },
    { "statusid": "14", "name": "Cierre Puerta", "icons": "maxspeed3.gif" },
    { "statusid": "15", "name": "Desplazamiento lento", "icons": "maxspeed4.gif" },
    { "statusid": "16", "name": "Posicion GPS Asistido", "icons": "null" },
    { "statusid": "17", "name": "Posicion sin GPS", "icons": "null" },
    { "statusid": "18", "name": "Activación Sirena", "icons": "null" },
    { "statusid": "19", "name": "Desactivación Sirena", "icons": "null" },
    { "statusid": "20", "name": "Boton Panico", "icons": "input1on.gif" },
    { "statusid": "21", "name": "Input 1 Off", "icons": "imput1off.gif" },
    { "statusid": "22", "name": "Movimiento NO Autorizado", "icons": "null" },
    { "statusid": "23", "name": "Input 2 Off", "icons": "null" },
    { "statusid": "24", "name": "Input 3 On", "icons": "null" },
    { "statusid": "25", "name": "Posicion Solicitada", "icons": "null" },
    { "statusid": "26", "name": "Boton Panico 2", "icons": "null" },
    { "statusid": "27", "name": "Input 4 Off", "icons": "null" },
    { "statusid": "28", "name": "Detenido Apagado", "icons": "null" },
    { "statusid": "29", "name": "Input 5 Off", "icons": "null" },
    { "statusid": "30", "name": "Cierre puerta trasera", "icons": "null" },
    { "statusid": "31", "name": "Apertura puerta trasera", "icons": "null" },
    { "statusid": "32", "name": "Datos deshabilitados", "icons": "datosOff.png" },
    { "statusid": "33", "name": "Datos-Habilitados", "icons": "other.gif" },
    { "statusid": "34", "name": "Apagar Motor Detenido", "icons": "null" },
    { "statusid": "35", "name": "Encender Motor Detenido", "icons": "null" },
    { "statusid": "36", "name": "In Geofence 1", "icons": "other.gif" },
    { "statusid": "37", "name": "Out Geofence 1", "icons": "other.gif" },
    { "statusid": "38", "name": "In Geofence 2", "icons": "other.gif" },
    { "statusid": "39", "name": "Roaming On", "icons": "other.gif" },
    { "statusid": "40", "name": "Roaming Off", "icons": "other.gif" },
    { "statusid": "41", "name": "Out Geofence 3", "icons": "other.gif" },
    { "statusid": "42", "name": "In Geofence 4", "icons": "other.gif" },
    { "statusid": "43", "name": "Out Geofence 4", "icons": "other.gif" },
    { "statusid": "44", "name": "In Geofence 5", "icons": "other.gif" },
    { "statusid": "45", "name": "Giro", "icons": "null" },
    { "statusid": "46", "name": "Giro 90 grados", "icons": "other.gif" },
    { "statusid": "47", "name": "Giro 135 grados", "icons": "other.gif" },
    { "statusid": "48", "name": "Giro 180 grados", "icons": "other.gif" },
    { "statusid": "49", "name": "Giro 225 grados", "icons": "other.gif" },
    { "statusid": "50", "name": "Giro 270 grados", "icons": "other.gif" },
    { "statusid": "51", "name": "Giro 315 grados", "icons": "other.gif" },
    { "statusid": "52", "name": "Pasajero", "icons": "other.gif" },
    { "statusid": "53", "name": "Cierre puerta lateral", "icons": "null" },
    { "statusid": "54", "name": "Apertura puerta lateral", "icons": "null" },
    { "statusid": "55", "name": "Out Geofence 10", "icons": "null" },
    { "statusid": "56", "name": "In Geofence 11", "icons": "null" },
    { "statusid": "57", "name": "Reinicio por GPS", "icons": "null" },
    { "statusid": "58", "name": "Reinicio por GSM", "icons": "null" },
    { "statusid": "59", "name": "Verificando equipo", "icons": "null" },
    { "statusid": "60", "name": "Enganche de Rastra", "icons": "other.gif" },
    { "statusid": "61", "name": "Aceleración Brusca", "icons": "other.gif" },
    { "statusid": "62", "name": "Frenado Brusco", "icons": "other.gif" },
    { "statusid": "63", "name": "Apagado", "icons": "apagado.png" },
    { "statusid": "64", "name": "Encendido", "icons": "encendido.png" },
    { "statusid": "65", "name": "Registro de iButton", "icons": "null" },
    { "statusid": "66", "name": "iButton Autorizado", "icons": "null" },
    { "statusid": "67", "name": "Entra Referencia 2", "icons": "null" },
    { "statusid": "68", "name": "Sale Referencia 1", "icons": "null" },
    { "statusid": "69", "name": "Entra Refencia 1", "icons": "null" },
    { "statusid": "70", "name": "Conexión Bateria Principal", "icons": "null" },
    { "statusid": "71", "name": "Desconexión Bateria Principal", "icons": "null" },
    { "statusid": "72", "name": "Motor sobre revolucionado", "icons": "null" },
    { "statusid": "73", "name": "Neutro sobre 40km/h", "icons": "null" },
    { "statusid": "74", "name": "Neutro sobre 70km/h", "icons": "null" },
    { "statusid": "75", "name": "Deteccion de jamming", "icons": "null" },
    { "statusid": "76", "name": "Encendido Thermoking", "icons": "null" },
    { "statusid": "77", "name": "Apagado Thermoking", "icons": "null" },
    { "statusid": "78", "name": "Sube pasajero", "icons": "null" },
    { "statusid": "79", "name": "Baja pasajero", "icons": "null" },
    { "statusid": "80", "name": "In Geofence 23", "icons": "null" },
    { "statusid": "81", "name": "Out Geofence 23", "icons": "null" },
    { "statusid": "82", "name": "In Geofence 24", "icons": "null" },
    { "statusid": "83", "name": "Out Geofence 24", "icons": "null" },
    { "statusid": "84", "name": "In Geofence 25", "icons": "null" },
    { "statusid": "85", "name": "Ubicación solicitada", "icons": "null" },
    { "statusid": "86", "name": "Cumplió Programación", "icons": "null" },
    { "statusid": "87", "name": "No Cumplió Programación", "icons": "null" },
    { "statusid": "88", "name": "Battery working", "icons": "null" },
    { "statusid": "89", "name": "Charging battery", "icons": "null" },
    { "statusid": "90", "name": "Low Battery", "icons": "b2.gif" },
    { "statusid": "91", "name": "JAMMING ON", "icons": "null" },
    { "statusid": "92", "name": "JAMMING OFF", "icons": "null" },
    { "statusid": "106", "name": "[Position1]", "icons": "null" },
    { "statusid": "107", "name": "[Position]", "icons": "null" },
    { "statusid": "113", "name": "[Otros]", "icons": "null" },
    { "statusid": "114", "name": "Power Off", "icons": "null" },
    { "statusid": "115", "name": "Apertura puerta piloto", "icons": "personal2.gif" },
    { "statusid": "116", "name": "Apertura puerta copiloto", "icons": "personal2.gif" },
    { "statusid": "117", "name": "Apertura Trasera izquierda", "icons": "personal2.gif" },
    { "statusid": "118", "name": "Apertura Trasera derecha", "icons": "personal2.gif" },
    { "statusid": "119", "name": "AC ON", "icons": "null" },
    { "statusid": "120", "name": "AC OFF", "icons": "null" },
    { "statusid": "128", "name": "Entrada Geozona", "icons": "null" },
    { "statusid": "129", "name": "Salida Geozona", "icons": "null" },
    { "statusid": "130", "name": "Contador Pasajeros(10)", "icons": "null" },
    { "statusid": "131", "name": "Exceso velocidad en Geozona", "icons": "null" },
    { "statusid": "134", "name": "Perdida Bateria Principal", "icons": "null" },
    { "statusid": "135", "name": "Parada Personalizada", "icons": "null" },
    { "statusid": "136", "name": "Parada en Sitio Personalizada", "icons": "null" },
    { "statusid": "137", "name": "Alarma Temperatura", "icons": "null" },
    { "statusid": "138", "name": "Descarga Bateria interna", "icons": "null" },
    { "statusid": "139", "name": "No Transmisión", "icons": "null" },
    { "statusid": "140", "name": "Exceso Velocidad Personalizada", "icons": "null" },
    { "statusid": "141", "name": "Salida de ruta", "icons": "null" },
    { "statusid": "142", "name": "Separacion de Vehiculo de Convoy", "icons": "null" },
    { "statusid": "143", "name": "Mantenimiento", "icons": "null" },
    { "statusid": "146", "name": "Fuera de Geozona", "icons": "null" },
    { "statusid": "147", "name": "Impacto", "icons": "null" },
        { "statusid": "148", "name": "Impacto detenido", "icons": "null" }];

Math.radians = function (degrees) { return degrees * Math.PI / 180; };
Math.degrees = function (radians) { return radians * 180 / Math.PI; };
Number.prototype.Between = function (min, max) {
    if (this >= min && this <= max) { return true } else { return false }
};
function findEventosDisplay(statusid) {
    var eDisplay = {};
    for (var i = EventosDisplay.length; i--;) {
        if (String(EventosDisplay[i].statusid) === String(statusid)) {
            eDisplay = EventosDisplay[i];
            break;
        }
    }
    return eDisplay;
}
function CalculateBearing(lat1, lon1, lat2, lon2) {
    var Bearing,
        dLat = Math.radians(lat2 - lat1),
        dLon = Math.radians(lon2 - lon1),
        rLat1 = Math.radians(lat1),
        rLat2 = Math.radians(lat2),
        y = Math.sin(dLon) * Math.cos(rLat2),
        x = Math.cos(rLat1) * Math.sin(rLat2) - Math.sin(rLat1) * Math.cos(rLat2) * Math.cos(dLon);
    if (x === 0 && y === 0) {
        Bearing = null;
    }
    else {
        Bearing = (Math.degrees(Math.atan2(y, x)) + 360) % 360;
    }
    return Bearing;
}
function fn_RotarIcono(statusid, heading, speed, BeginEnd, tipoVehiculo/* 0=otros 1=Begin 2=End */) {
    if (heading === null) {
        return 'other.gif';
    }
    var grados = 0, imagen_nueva = "";
    if (tipoVehiculo === "c" || tipoVehiculo === "C") {
        if ((statusid === 1 || (statusid >= 45 && statusid <= 52)) && BeginEnd === 0) {
            grados = heading.Between(1, 45) ? (heading < Math.abs(heading - 45) ? 0 : 45)
                : heading.Between(46, 90) ? (Math.abs(heading - 46) < Math.abs(90 - heading) ? 45 : 90)
                    : heading.Between(91, 135) ? (Math.abs(heading - 91) < Math.abs(135 - heading) ? 90 : 135)
                        : heading.Between(136, 180) ? (Math.abs(heading - 136) < Math.abs(180 - heading) ? 135 : 180)
                            : heading.Between(181, 225) ? (Math.abs(heading - 181) < Math.abs(225 - heading) ? 180 : 225)
                                : heading.Between(226, 270) ? (Math.abs(heading - 226) < Math.abs(270 - heading) ? 225 : 270)
                                    : heading.Between(271, 315) ? (Math.abs(heading - 271) < Math.abs(315 - heading) ? 270 : 315)
                                        : heading.Between(316, 360) ? (Math.abs(heading - 316) < Math.abs(360 - heading) ? 315 : 0)
                                            : 90;
            if (speed >= 0 && speed <= 60) {
                imagen_nueva = 'lowspeed_' + grados + '.gif';
            }
            else if (speed > 60 && speed <= 75) {
                imagen_nueva = 'midspeed_' + grados + '.gif';
            }
            else {
                imagen_nueva = 'hispeed_' + grados + '.gif';
            }
        }
        else if (statusid === 2 && BeginEnd === 0) {
            imagen_nueva = 'ignitionon.gif';
        }
        else if (statusid === 3 && BeginEnd === 0) {
            imagen_nueva = 'ignitionoff.gif';
        }
        else if (statusid === 9 && BeginEnd === 0) {
            imagen_nueva = 'gpslost.gif';
        }
        else if (statusid === 10 && BeginEnd === 0) {
            imagen_nueva = 'stop_black.png';
        }
        else if (statusid === 12 && BeginEnd === 0) {
            imagen_nueva = 'maxspeed1.gif';
        }
        else if (statusid === 13 && BeginEnd === 0) {
            imagen_nueva = 'maxspeed2.gif';
        }
        else if (statusid === 14 && BeginEnd === 0) {
            imagen_nueva = 'maxspeed3.gif';
        }
        else if (statusid === 15 && BeginEnd === 0) {
            imagen_nueva = 'maxspeed4.gif';
        }
        else if (statusid === 20 && BeginEnd === 0) {
            imagen_nueva = 'input1on.gif';
        }
        else if (statusid === 21 && BeginEnd === 0) {
            imagen_nueva = 'input1off.gif';
        }
        else if (BeginEnd === 1) {
            imagen_nueva = 'startpoint.gif';
        }
        else if (BeginEnd === 2) {
            imagen_nueva = 'car.gif';
        }
        else {
            imagen_nueva = 'other.gif';
        }

    }
    else {
        if ((statusid === 1 || (statusid >= 45 && statusid <= 52)) && BeginEnd === 0) {
            grados = heading.Between(1, 45) ? (heading < Math.abs(heading - 45) ? 0 : 45)
                : heading.Between(46, 90) ? (Math.abs(heading - 46) < Math.abs(90 - heading) ? 45 : 90)
                    : heading.Between(91, 135) ? (Math.abs(heading - 91) < Math.abs(135 - heading) ? 90 : 135)
                        : heading.Between(136, 180) ? (Math.abs(heading - 136) < Math.abs(180 - heading) ? 135 : 180)
                            : heading.Between(181, 225) ? (Math.abs(heading - 181) < Math.abs(225 - heading) ? 180 : 225)
                                : heading.Between(226, 270) ? (Math.abs(heading - 226) < Math.abs(270 - heading) ? 225 : 270)
                                    : heading.Between(271, 315) ? (Math.abs(heading - 271) < Math.abs(315 - heading) ? 270 : 315)
                                        : heading.Between(316, 360) ? (Math.abs(heading - 316) < Math.abs(360 - heading) ? 315 : 0)
                                            : 90;
            if (speed >= 0 && speed <= 60) {
                imagen_nueva = 'lowspeed_' + grados + '.gif';
            }
            else if (speed >= 60 && speed <= 90) {
                imagen_nueva = 'midspeed_' + grados + '.gif';
            }
            else {
                imagen_nueva = 'hispeed_' + grados + '.gif';
            }
        }
        else if (statusid === 2 && BeginEnd === 0) {
            imagen_nueva = 'ignitionon.gif'
        }
        else if (statusid === 3 && BeginEnd === 0) {
            imagen_nueva = 'ignitionoff.gif';
        }
        else if (statusid === 9 && BeginEnd === 0) {
            imagen_nueva = 'gpslost.gif';
        }
        else if (statusid === 10 && BeginEnd === 0) {
            imagen_nueva = 'stop_black.png';
        }
        else if (statusid === 12 && BeginEnd === 0) {
            imagen_nueva = 'maxspeed1.gif';
        }
        else if (statusid === 13 && BeginEnd === 0) {
            imagen_nueva = 'maxspeed2.gif';
        }
        else if (statusid === 14 && BeginEnd === 0) {
            imagen_nueva = 'maxspeed3.gif';
        }
        else if (statusid === 15 && BeginEnd === 0) {
            imagen_nueva = 'maxspeed4.gif';
        }
        else if (statusid === 20 && BeginEnd === 0) {
            imagen_nueva = 'input1on.gif';
        }
        else if (statusid === 21 && BeginEnd === 0) {
            imagen_nueva = 'input1off.gif';
        }
        else if (BeginEnd === 1) {
            imagen_nueva = 'startpoint.gif';
        }
        else if (BeginEnd === 2) {
            imagen_nueva = 'car.gif';
        }
        else {
            imagen_nueva = 'other.gif';
        }
    }
    return imagen_nueva;
}

